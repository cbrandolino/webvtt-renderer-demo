(this["webpackJsonpvtt.ts"]=this["webpackJsonpvtt.ts"]||[]).push([[0],[function(e,t,n){"use strict";n.r(t),n.d(t,"VTTParser",(function(){return A})),n.d(t,"parseRegion",(function(){return O})),n.d(t,"types",(function(){return r}));var r={};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(r),n.d(r,"cueKeys",(function(){return k})),n.d(r,"XCue",(function(){return E}));var s=function(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"===typeof i[o]){var a=i[o].split(n);if(2===a.length)t(a[0],a[1])}};function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){var t=l();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function d(e,t,n){return d=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},d.apply(null,arguments)}function v(e){var t="function"===typeof Map?new Map:void 0;return v=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return d(e,arguments,f(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},v(e)}var y=function(e){c(n,e);var t=g(n);function n(e,r){var o;return i(this,n),(o=t.call(this,r||e.message)).name="ParsingError",o.code=void 0,o.message="",o.code=e.code,o}return n}(v(Error));y.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};var b=y,_=function(){function e(){i(this,e),this.values=Object.create(null)}return a(e,[{key:"set",value:function(e,t){this.get(e)||""===t||(this.values[e]=t)}},{key:"get",value:function(e,t,n){var r=n&&t instanceof Object?t[n]:t;return this.has(e)?this.values[e]:r}},{key:"has",value:function(e){return e in this.values}},{key:"alt",value:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}},{key:"integer",value:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}},{key:"percent",value:function(e,t){if(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}]),e}();var m=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!n)return null;var r=n.map((function(e){return parseInt(e.replace(":",""))}));return r[3]?t(r[1],r[2],r[3],r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4])};var w=function(e,t,n){var r=e;function i(){var t=m(e);if(null===t)throw new b(b.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new b(b.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new _;s(e,(function(e,t){var i;switch(e){case"region":if(n)for(var o=n.length-1;o>=0;o--)if(n[o].id===t){r.set(e,n[o].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];r.integer(e,s),null!==(i=r.percent(e,s))&&void 0!==i||r.set("snapToLines",!1),r.alt(e,s,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),console.log("parsing cue:",t),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line","auto"),t.lineAlign=r.get("lineAlign","center"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align","middle"),t.position=r.get("position","auto"),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",end:"end",right:"end"},t.align),console.log("defaults applied!",t)}(e,t)},T=function(e){c(n,e);var t=g(n);function n(){return i(this,n),t.apply(this,arguments)}return a(n,[{key:"toJSON",value:function(){var e=this,t={};return k.forEach((function(n){t[n]=e[n]})),t}},{key:"set",value:function(e,t){this[e]=t}}]),n}(v(VTTCue)),E=T,k=["align","endTime","id","line","lineAlign","pauseOnExit","position","positionAlign","startTime","region","size","snapToLines","startTime","text","vertical"];var O=function(e){var t=e.input,n=e.regionList,r=e.onRegion,i=new _;if(s(t,(function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new _;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}}),/=/,/\s/),i.has("id")){var o=new VTTRegion;o.width=i.get("width",100),o.lines=i.get("lines",3),o.regionAnchorX=i.get("regionanchorX",0),o.regionAnchorY=i.get("regionanchorY",100),o.viewportAnchorX=i.get("viewportanchorX",0),o.viewportAnchorY=i.get("viewportanchorY",100),o.scroll=i.get("scroll",""),r&&r(o),n.push({id:i.get("id"),region:o})}},A=function(){function e(t){var n=t.onError,r=t.onRegion,o=t.onCue,a=t.onFlush,s=t.parseRegion,u=t.decoder;i(this,e),this.onError=void 0,this.onRegion=void 0,this.onCue=void 0,this.onFlush=void 0,this.parseRegion=void 0,this._state="INITIAL",this._buffer="",this._decoder=void 0,this._cue=void 0,this._regionList=[],this.onError=n,this.onRegion=r,this.onCue=o,this.onFlush=a,this._cue=null,this.parseRegion=s,this._decoder=u||new TextDecoder("utf-8")}return a(e,[{key:"reportOrThrowError",value:function(e){if(!(e instanceof b))throw e;this.onError&&this.onError(e)}},{key:"parse",value:function(e){var t=this;function n(){for(var e=t._buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t._buffer=e.substr(n),r}e&&(t._buffer+="string"===typeof e?e:t._decoder.decode(e,{stream:!0}));try{var r="";if("INITIAL"===t._state){if(!/\r\n|\n/.test(t._buffer))return this;var i=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new b(b.Errors.BadSignature);t._state="HEADER"}for(var o=!1;t._buffer;){if(!/\r\n|\n/.test(t._buffer))return this;switch(o?o=!1:r=n(),t._state){case"HEADER":/:/.test(r)?s(r,(function(e,n){"Region"===e&&t.parseRegion&&t.parseRegion({input:n,regionList:t._regionList,onRegion:t.onRegion})}),/:/):r||(t._state="ID");continue;case"NOTE":r||(t._state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t._state="NOTE";break}if(!r)continue;if(t._cue=new E(0,0,"").toJSON(),t._state="CUE",-1===r.indexOf("--\x3e")){t._cue.id=r;continue}case"CUE":try{w(r,t._cue,t._regionList)}catch(u){t.reportOrThrowError(u),t._cue=null,t._state="BADCUE";continue}t._state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){t.onCue&&t._cue&&t.onCue(t._cue),t._cue=null,t._state="ID";continue}t._cue.text&&(t._cue.text+="\n"),t._cue.text+=r;continue;case"BADCUE":r||(t._state="ID");continue}}}catch(u){t.reportOrThrowError(u),"CUETEXT"===t._state&&t._cue&&t.onCue&&t.onCue(t._cue),t._cue=null,t._state="INITIAL"===t._state?"BADWEBVTT":"BADCUE"}return this}},{key:"flush",value:function(){var e=this;try{if(e._buffer+=e._decoder.decode(),(e._cue||"HEADER"===e._state)&&(e._buffer+="\n\n",e.parse()),"INITIAL"===e._state)throw new b(b.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onFlush&&e.onFlush(),this}}]),e}()}],[[0,1]]]);
//# sourceMappingURL=main.8e5785be.chunk.js.map